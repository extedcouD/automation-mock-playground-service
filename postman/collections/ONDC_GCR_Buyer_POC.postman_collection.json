{
  "info": {
    "_postman_id": "3f2e568f-5872-451c-9fef-13b8b73e6ea1",
    "name": "ONDC GCR Buyer POC",
    "description": "Postman collection for ONDC GCR (Gateway, Catalog, Registry) Buyer Proof of Concept service. This collection includes endpoints for ONDC protocol interactions including search operations and health monitoring.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health & Status",
      "item": [
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has success field\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test(\"Response contains health data\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.have.property('status');",
                  "    pm.expect(jsonData.data).to.have.property('uptime');",
                  "    pm.expect(jsonData.data).to.have.property('timestamp');",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 1000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(1000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "0fb9fe92-393f-4580-b956-17a30d909f6b",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Check the health status of the ONDC GCR Buyer POC service. Returns system health information including uptime, database status, and performance metrics."
          }
        }
      ],
      "id": "b25e0a3a-def6-44a8-9fcb-fa677d2d0b70",
      "description": "Endpoints for service health monitoring and status checks"
    },
    {
      "name": "ONDC Protocol",
      "item": [
        {
          "name": "Search Request",
          "event": [
            {
              "listen": "pre-request",
              "script": {
                "exec": [
                  "// Generate dynamic values for ONDC context",
                  "pm.collectionVariables.set('transactionId', 'txn_' + pm.variables.replaceIn('{{$randomAlphaNumeric}}') + '_' + Date.now());",
                  "pm.collectionVariables.set('messageId', 'msg_' + pm.variables.replaceIn('{{$randomAlphaNumeric}}') + '_' + Date.now());",
                  "pm.collectionVariables.set('timestamp', new Date().toISOString());",
                  "",
                  "console.log('Generated Transaction ID:', pm.collectionVariables.get('transactionId'));",
                  "console.log('Generated Message ID:', pm.collectionVariables.get('messageId'));"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has context\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('context');",
                  "    pm.expect(jsonData.context).to.have.property('action');",
                  "    pm.expect(jsonData.context).to.have.property('transaction_id');",
                  "    pm.expect(jsonData.context).to.have.property('message_id');",
                  "});",
                  "",
                  "pm.test(\"Response has ACK message\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('message');",
                  "    pm.expect(jsonData.message).to.have.property('ack');",
                  "    pm.expect(jsonData.message.ack).to.have.property('status');",
                  "    pm.expect(jsonData.message.ack.status).to.equal('ACK');",
                  "});",
                  "",
                  "pm.test(\"Response time is acceptable\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});",
                  "",
                  "// Store transaction ID for subsequent requests",
                  "const responseJson = pm.response.json();",
                  "if (responseJson.context && responseJson.context.transaction_id) {",
                  "    pm.collectionVariables.set('lastTransactionId', responseJson.context.transaction_id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "15e385ed-a17a-4dfb-b3ea-784ec840e84f",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"context\": {\n        \"domain\": \"{{domain}}\",\n        \"action\": \"search\",\n        \"country\": \"{{country}}\",\n        \"city\": \"{{city}}\",\n        \"core_version\": \"{{version}}\",\n        \"bap_id\": \"{{bapId}}\",\n        \"bap_uri\": \"{{bapUri}}\",\n        \"bpp_id\": \"{{bppId}}\",\n        \"bpp_uri\": \"{{bppUri}}\",\n        \"transaction_id\": \"{{transactionId}}\",\n        \"message_id\": \"{{messageId}}\",\n        \"timestamp\": \"{{timestamp}}\",\n        \"ttl\": \"{{ttl}}\"\n    },\n    \"message\": {\n        \"intent\": {\n            \"category\": {\n                \"id\": \"Food and Beverages\"\n            },\n            \"fulfillment\": {\n                \"type\": \"Delivery\",\n                \"end\": {\n                    \"location\": {\n                        \"gps\": \"12.9715987,77.5945627\",\n                        \"area_code\": \"560001\"\n                    }\n                }\n            },\n            \"payment\": {\n                \"@ondc/org/buyer_app_finder_fee_type\": \"percent\",\n                \"@ondc/org/buyer_app_finder_fee_amount\": \"3\"\n            },\n            \"tags\": [\n                {\n                    \"code\": \"catalog_inc\",\n                    \"list\": [\n                        {\n                            \"code\": \"mode\",\n                            \"value\": \"start\"\n                        }\n                    ]\n                }\n            ]\n        }\n    }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/ondc/search",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "ondc",
                "search"
              ]
            },
            "description": "Send a search request to discover available products/services on the ONDC network. This endpoint validates the request payload and returns an acknowledgment."
          }
        }
      ],
      "id": "8da0119e-3830-4e64-97e2-93ae79fb2339",
      "description": "ONDC protocol endpoints for buyer-side operations"
    },
    {
      "name": "Error Scenarios",
      "item": [
        {
          "name": "Invalid JSON Request",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400\", function () {",
                  "    pm.response.to.have.status(400);",
                  "});",
                  "",
                  "pm.test(\"Response indicates error\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "    pm.expect(jsonData).to.have.property('errorCode');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "4997aa72-be38-4754-92a6-c7b05275dba3",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{ invalid json }",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/ondc/search",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "ondc",
                "search"
              ]
            },
            "description": "Test invalid JSON payload handling"
          }
        },
        {
          "name": "Missing Context",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 400 or 422\", function () {",
                  "    pm.expect([400, 422]).to.include(pm.response.code);",
                  "});",
                  "",
                  "pm.test(\"Response indicates validation error\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "2365c7b3-6987-4ebf-a3ac-f7db8bca7943",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"message\": {\n        \"intent\": {\n            \"category\": {\n                \"id\": \"Food and Beverages\"\n            }\n        }\n    }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/ondc/search",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "ondc",
                "search"
              ]
            },
            "description": "Test request with missing context"
          }
        },
        {
          "name": "Wrong Action",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "b6fcdf67-8207-415f-b842-4245525a6147",
                "exec": [
                  "pm.test(\"Status code is 400 or 422\", function () {",
                  "    pm.expect([400, 422]).to.include(pm.response.code);",
                  "});",
                  "",
                  "pm.test(\"Response indicates action error\", function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success');",
                  "    pm.expect(jsonData.success).to.be.false;",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "df401722-f813-4f03-b942-1e114d1ebada",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "id": "05cab26b-1938-40f3-9e3e-0075d8f66b70",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Correlation-ID",
                "value": "{{correlationId}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"context\": {\n        \"domain\": \"{{domain}}\",\n        \"action\": \"search\",\n        \"country\": \"{{country}}\",\n        \"city\": \"{{city}}\",\n        \"core_version\": \"{{version}}\",\n        \"bap_id\": \"{{bapId}}\",\n        \"bap_uri\": \"{{bapUri}}\",\n        \"transaction_id\": \"{{transactionId}}\",\n        \"message_id\": \"{{messageId}}\",\n        \"timestamp\": \"{{timestamp}}\",\n        \"ttl\": \"{{ttl}}\"\n    },\n    \"message\": {\n        \"intent\": {\n            \"category\": {\n                \"id\": \"Food and Beverages\"\n            }\n        }\n    }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/ondc/search",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "ondc",
                "search"
              ]
            },
            "description": "Test request with wrong action (select instead of search)"
          }
        }
      ],
      "id": "815f2747-a568-4ef7-8891-6978a5946edc",
      "description": "Test cases for error handling and validation"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global pre-request script",
          "console.log('Making request to:', pm.request.url.toString());",
          "",
          "// Add timestamp to all requests",
          "pm.globals.set('currentTimestamp', new Date().toISOString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script",
          "pm.test('Response time is reasonable', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(10000);",
          "});",
          "",
          "pm.test('Response has proper content type', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "// Log response for debugging",
          "console.log('Response status:', pm.response.status);",
          "console.log('Response time:', pm.response.responseTime, 'ms');"
        ]
      }
    }
  ],
  "variable": [
    {
      "id": "b2992584-3c1c-4a50-8d13-26c48017863b",
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "description": {
        "content": "Base URL for the ONDC GCR Buyer POC service",
        "type": "text/plain"
      }
    },
    {
      "id": "6697b5f2-35a2-4eca-8c18-025f327f6dc1",
      "key": "correlationId",
      "value": "{{$guid}}",
      "description": {
        "content": "Auto-generated correlation ID for request tracing",
        "type": "text/plain"
      }
    },
    {
      "id": "2f673b32-8e64-427c-8c4a-107589fd3bb3",
      "key": "transactionId",
      "value": "txn_{{$randomAlphaNumeric}}{{$timestamp}}",
      "description": {
        "content": "Auto-generated transaction ID",
        "type": "text/plain"
      }
    },
    {
      "id": "5649da18-67bb-4e6b-8f5a-7dfad6550e21",
      "key": "messageId",
      "value": "msg_{{$randomAlphaNumeric}}{{$timestamp}}",
      "description": {
        "content": "Auto-generated message ID",
        "type": "text/plain"
      }
    },
    {
      "id": "40359962-2411-4285-a1ea-f5c79e1379e5",
      "key": "timestamp",
      "value": "{{$isoTimestamp}}",
      "description": {
        "content": "Current ISO timestamp",
        "type": "text/plain"
      }
    },
    {
      "id": "50cf0533-fbd1-46cd-86b7-7fde9755cf5f",
      "key": "bapId",
      "value": "buyer-app.ondc.org",
      "description": {
        "content": "Buyer App ID",
        "type": "text/plain"
      }
    },
    {
      "id": "3ac01a48-9957-48d8-a755-585a04530142",
      "key": "bapUri",
      "value": "https://buyer-app.ondc.org",
      "description": {
        "content": "Buyer App URI",
        "type": "text/plain"
      }
    },
    {
      "id": "5a526637-52a5-4296-9d04-b9f02263b878",
      "key": "bppId",
      "value": "seller-app.ondc.org",
      "description": {
        "content": "Seller App ID",
        "type": "text/plain"
      }
    },
    {
      "id": "6dc0fa8d-8e5e-402d-88e6-0e07e85d8ee4",
      "key": "bppUri",
      "value": "https://seller-app.ondc.org",
      "description": {
        "content": "Seller App URI",
        "type": "text/plain"
      }
    },
    {
      "id": "8ca8e36b-b796-46af-8bc5-9ad325963306",
      "key": "domain",
      "value": "ONDC:RET10",
      "description": {
        "content": "ONDC Domain - Retail",
        "type": "text/plain"
      }
    },
    {
      "id": "de23612d-1770-4877-89ad-9f552f01b02f",
      "key": "version",
      "value": "1.2.0",
      "description": {
        "content": "ONDC Core Version",
        "type": "text/plain"
      }
    },
    {
      "id": "dd4582b4-2c13-4d81-b0a2-a82d75d061a6",
      "key": "country",
      "value": "IND",
      "description": {
        "content": "Country Code",
        "type": "text/plain"
      }
    },
    {
      "id": "79cb8e42-ee57-4c54-adac-89751b6ff8aa",
      "key": "city",
      "value": "std:080",
      "description": {
        "content": "City Code (Bangalore)",
        "type": "text/plain"
      }
    },
    {
      "id": "47fd18b9-2835-47d5-91e2-8529aa6a7673",
      "key": "ttl",
      "value": "PT30S",
      "description": {
        "content": "Time to Live in ISO 8601 duration format",
        "type": "text/plain"
      }
    },
    {
      "id": "0713b784-af60-45d3-acdb-d6c00c84da37",
      "key": "lastTransactionId",
      "value": ""
    }
  ]
}